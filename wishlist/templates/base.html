{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>{% block title %}{% trans "–ú–æ–π –í–∏—à–ª–∏—Å—Ç" %}{% endblock %}</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
</head>
<body>
    <header>
        <div class="header">
            <h1>{% block header %}{% endblock %}</h1>
        </div>
        <div class="header-actions">
            <button id="menu-toggle" class="icon-button menu-icon">
                <i class="fa-solid fa-bars"></i>
            </button>
            <div class="action-icons" id="action-icons">
                <div class="action-icons-set">
                {% block extra_header_actions %}
                {% endblock %}
                <div class="language-selector">
                <button id="language-toggle" class="icon-button">
                    <i class="fa-solid fa-globe"></i>
                </button>
                <div id="language-menu" class="language-menu">
                    <form action="{% url 'set_language' %}" method="post">
                        {% csrf_token %}
                        <select name="language" onchange="this.form.submit()">
                            <option value="ru" {% if LANGUAGE_CODE == 'ru' %}selected{% endif %}>üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                            <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>üá¨üáß English</option>
                        </select>
                    </form>
                </div>
                </div>
                {% if user.is_authenticated %}
                    <form action="{% url 'logout' %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="icon-button">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </form>
                {% else %}
                    <button onclick="window.location.href='{% url 'login' %}';" class="icon-button">
                        <i class="fas fa-sign-in-alt"></i>
                    </button>
                {% endif %}
                </div>
            </div>
        </div>
    </header>    
    <main>
        <div class="center-container">
        {% block content %}{% endblock %}
        </div>
    </main>
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p class="modal-text"></p>
            <div class="modal-buttons">
                <button id="cancelBtn" class="modal-button cancel">{% trans "–ù–µ—Ç" %}</button>
                <button id="confirmBtn" data-type="shadow" class="modal-button">{% trans "–î–∞" %}</button>
            </div>
        </div>
    </div>
    <footer>
        {% block footer %}
        &copy; 2024 –ú–æ–π –í–∏—à–ª–∏—Å—Ç
        {% endblock %}
    </footer>
    <script src="{% static 'js/scripts.js' %}"></script>
    {% block extra_script %}{% endblock %}
    <script>
        texts = {}
        document.addEventListener("DOMContentLoaded", function() {
            const languageToggle = document.getElementById("language-toggle");
            const languageMenu = document.getElementById("language-menu");
            languageToggle.addEventListener("click", function() {
                languageMenu.classList.toggle("show");
            });
            document.addEventListener("click", function(event) {
                if (!languageToggle.contains(event.target) && !languageMenu.contains(event.target)) {
                    languageMenu.classList.remove("show");
                }
            });
        });
        document.addEventListener("DOMContentLoaded", function() {
            const menuToggle = document.getElementById("menu-toggle");
            const actionIcons = document.getElementById("action-icons");
            if (menuToggle && actionIcons) {
                menuToggle.addEventListener("click", function() {actionIcons.classList.toggle('show');});
                document.addEventListener("click", function() {
                    if (!actionIcons.contains(event.target) && !menuToggle.contains(event.target)) {
                        actionIcons.classList.remove('show');
                    }
                });
            }
        });
    {% block script %}{% endblock %}
    </script>
</body>
</html>
